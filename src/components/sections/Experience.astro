---
import { experiences } from "@/data/experience";
---

<section id="experience" class="py-10">
  <div class="mb-6 flex items-center gap-3">
    <h2 class="text-sm font-bold tracking-widest text-accent uppercase">Kinh nghiá»‡m</h2>
    <div class="h-px flex-1 bg-border/20"></div>
  </div>

  <div class="relative space-y-0">
    <!-- Vertical timeline line -->
    <div class="absolute left-[7px] top-2 bottom-2 w-px bg-border/30"></div>

    {experiences.map(exp => (
      <div class="relative pl-8 pb-8 last:pb-0">
        <!-- Timeline dot -->
        <div
          class:list={[
            "absolute left-0 top-1.5 h-3.5 w-3.5 rounded-full border-2 transition-colors",
            exp.current
              ? "border-accent bg-accent/30"
              : "border-border/60 bg-background",
          ]}
        >
          {exp.current && (
            <span class="absolute inset-0 animate-ping rounded-full bg-accent opacity-30"></span>
          )}
        </div>

        <!-- Content -->
        <div class="group rounded-xl border border-border/20 bg-muted/10 p-4 transition-all duration-200 hover:border-accent/20 hover:bg-muted/20">
          <div class="flex flex-wrap items-start justify-between gap-2">
            <div>
              <h3 class="font-semibold text-foreground">{exp.role}</h3>
              <p class="text-sm font-medium text-accent">{exp.company}</p>
            </div>
            <div class="text-right">
              <p class="font-cartograph text-xs text-muted-foreground">{exp.period}</p>
              <p class="font-cartograph text-xs text-muted-foreground/60">{exp.location}</p>
            </div>
          </div>

          <p class="mt-2 text-sm text-muted-foreground leading-relaxed">{exp.description}</p>

          <ul class="mt-3 space-y-1">
            {exp.highlights.map(h => (
              <li class="flex items-start gap-2 text-sm text-muted-foreground">
                <span class="mt-1.5 h-1 w-1 flex-shrink-0 rounded-full bg-accent/60"></span>
                {h}
              </li>
            ))}
          </ul>

          <div class="mt-3 flex flex-wrap gap-1.5">
            {exp.technologies.map(tech => (
              <span class="rounded-md border border-border/20 bg-background/50 px-2 py-0.5 font-cartograph text-xs text-muted-foreground">
                {tech}
              </span>
            ))}
          </div>
        </div>
      </div>
    ))}
  </div>
</section>
